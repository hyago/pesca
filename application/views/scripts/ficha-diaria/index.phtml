<h2>Desembarque->Ficha Diária</h2>

<fieldset id="Desembarque"></fieldset>
 <form name="indexFichaDiaria" method="post">
<table id="tabelaSemEstilo">
    <tr>
        <td>
            <a href="<?= $this->url(array("controller" => "ficha-diaria", "action" => "novo"), null, true) ?>" id="botao-ancora">Novo</a>
        </td>
        <td>
            <input type="button" size="50" value="Limpar Busca" class="button-confirmText" onclick="jsClearBuscaFichaDiaria('<?= $this->url(array("controller" => "ficha-diaria", "action" => "index"), null, true) ?>')">
        </td>
        <td>
            <input type="button" size="50" value="Listar Todos" class="button-confirmText" onclick="jsBuscaTodasFichas('<?= $this->url(array("controller" => "ficha-diaria", "action" => "index", "fd_all"=>"all"), null, true) ?>')">
        </td>
    </tr>
</table>
<table id="tabelaSemEstilo">
    <tr>
        <td>
            <input type="button" size="50" value="Busca por ID" class="button-confirmText" onclick="jsBuscaFichaDiariaId(this.form, '<?= $this->url(array("controller" => "ficha-diaria", "action" => "index"), null, true) ?>')">
            <input type="number" min="0" name="inputId" placeholder="Busca por ID" />
        </td>
        <td width="35%">
            <input type="button" size="50" value="Busca por Porto" class="button-confirmText" onclick="jsBuscaFichaDiariaPortoData(this.form, '<?= $this->url(array("controller" => "ficha-diaria", "action" => "index"), null, true) ?>')">
            <div id="form-dir">
                <select name="selectPortoName" id="selectPortoID">
                    <?php foreach ($this->assignDadosPorto as $key => $localPorto): ?>
                        <option value="<?= $localPorto['pto_id']; ?>"><?= $localPorto['pto_nome']; ?></option>
                    <?php endforeach; ?>
                </select>
            </div>
        </td> 
        <td>
            <input type="button" size="50" value="Busca por Data" class="button-confirmText" onclick="jsBuscaFichaDiariaData(this.form, '<?= $this->url(array("controller" => "ficha-diaria", "action" => "index"), null, true) ?>')">
            <input type="date" name="inputDate" placeholder="Busca por Data" />
        </td>
    </tr>
</table>
<table id="tabelaComEstilo">
    <tr>
        <th>ID</th>
        <th>Data</th>
        <th>Turno</th>
        <th>Porto</th>
        <th>Estagiário</th>
        <th>Monitor</th>

    </tr>

    <?php foreach ($this->dados as $key => $fichadiaria): ?>
    <tr>
        <td width="10%"><?= $fichadiaria['fd_id'] ?></td>
        <td width="10%"><?= date("d-m-Y", strtotime($fichadiaria['fd_data']))  ?></td>
        <td width="5%"><?= $fichadiaria['fd_turno'] ?></td>
        <td width="10%"><?= $fichadiaria['pto_nome'] ?></td>
        <td width="30%"><?= $fichadiaria['t_estagiario'] ?></td>
        <td width="20%"><?= $fichadiaria['t_monitor'] ?></td>
        <td width="10%" class="td-botao">
            <a href="<?=$this->url(array("controller"=>"ficha-diaria","action"=>"editar", "id" => $fichadiaria['fd_id']),null,true)?>">
                <ul id="icons" class="ui-widget ui-helper-clearfix">
                    <li class="ui-state-default ui-corner-all" title="Editar"><span class="ui-icon ui-icon-pencil"></span></li>
                </ul>
            </a>
        </td>
        <td width="20%" class="td-botao">
            <input type="button" value="Excluir" onclick="beforeDelete('<?= $this->url(array("controller" => "ficha-diaria", "action" => "excluir", "id" => $fichadiaria['fd_id']), null, true) ?>')">
        </td>
        <td width="5%" class="td-botao">
            <a href="<?=$this->url(array("controller"=>"ficha-diaria","action"=>"imprimirfichaid", "id" => $fichadiaria['fd_id']),null,true)?>">
                <ul id="icons" class="ui-widget ui-helper-clearfix">
                    <li class="ui-state-default ui-corner-all" title="Imprimir"><span class="ui-icon ui-icon-print"></span></li>
                </ul>
            </a>
        </td>
    </tr>
    <?php endforeach; ?>
</table>
     <a href="<?= $this->url(array("controller" => "ficha-diaria", "action" => "imprimirfichatodas"), null, true) ?>" id="botao-ancora" target="_blank">Gerar Relatório</a>
 </form>
